# 20221105总结

> Mi ne ~~akiris~~,akiras,kaj akiros nulon,eterne.		----STB
>
> 翻译 : OIer永不保龄，~~过去不会(已经爆零力)~~，现在不会，未来也不会

## T1 - erchatree

一眼二叉树，鉴定为可做题。实际上是一道非常裸的二叉树题，考察对二叉树性质的掌握。

问题问的是编号为 $ x $ 的结点的先序遍历编号，也就是 $ dfn $。稍作思考，可以把这个问题转换为“求其父节点和非当前节点左子树的大小“。用人话来说，分为以下两种情况：

1. 无论当前节点为左儿子或右儿子，向上跳一个结点，答案加一
2. 如果当前节点为右儿子，答案加上父节点的左子树大小

这是不难想出的，因为先序遍历的性质就是“在自己'左边'和'上边'的节点都被访问过了”，所以自然，父节点肯定会对当前编号做出 $ 1 $ 的贡献，同时如果当前节点为左子树，父节点右子树的每一个节点一定都贡献 $ 1 $ 的贡献，总共贡献 $ size(x) $ 的值，其中 $ x $  表示当前节点的父节点的左儿子。

于是我们可以得到这么一段没有具体实现的代码：

```cpp
while(x/2 > 0){
	if(x % 2 == 1){
		ans += AkiriMaldekstraChidoj(x/2);//获得x/2的左子树大小
	}
	ans++;
	x /= 2;
}
```

于是我们要具体来实现这个`AkiriMaldekstraChidoj`函数（它的意思是：获取左子树的大小）

对于一棵二叉树，我把它分为了两个部分：叶子节点和非叶子节点、所以某棵左子树的大小也由这两部分组成。对于 $ x $ 来说，$ size(x) $ 来源于非叶子节点的值为 $ 2^{dep_{tree} - dep_x}$，把指数单独拉出来看，$ dep_{tree} - dep_x$，$ dep_{tree}$ 表示**不含叶节点的树**的深度，$ dep_x $ 表示当前 $ x $ 的深度。这是因为把叶子结点抛开，这是一棵完整二叉树，所以根据其性质很容易得出这个结论~~（其实咱是一点点试出来的）~~。然后。叶子结点带来的贡献是`min(n-np+1,du[dep-nowdep])`，继续拆开来看。

在这里面，其中`np`是该子树中编号最小的叶节点的编号，那么`n-np+1`表示的就是在`np`右边（包括自己）的叶节点个数，因为最多只有这么多个叶子结点可能造成贡献。同时，`du[dep-nowdep]`表示 $ 2^{dep_{tree}-dep_{x}}$。这是因为对于 $ x $ 来说最多只有这么多个叶子结点，再多的叶子结点也不是它的孩子（这同样是由二叉树的性质决定的）。于是我们最终实现了 `AkiriMaldekstraChidoj`：

```cpp
#define ll long long
ll AkiriMaldekstraChidoj(ll pos){
	ll ret = 0,nowdep = AkiriProfundo(pos);//AkiriProfundo:获得深度
	ret += du[dep-nowdep]-1;//du[x]为预处理的2^x
	ll np = pos;
	while(np*2 < leaf_start)np *= 2;//leaf_start:第一个叶子结点的编号
	np *= 2;//求该子树中编号最小的叶节点的编号
	if(np <= n){//特判防止该子树不包括总树的叶子结点
		ret += min(n-np+1,du[dep-nowdep]);
	}
	return ret;
}
```

因为这些操作都在二叉树上实现,所以每次的复杂度均是 $ log \ n$ 的（在求深度和求最小叶节点编号上花费的），总复杂度 $ O(mlog \ n) $  ，结局此题

此题完全符合我的做题偏好~~(XP)~~，所以做它的时候觉得非常舒服，给这次考试开了个好头。~~（等下我好像写成题解了）~~

对拍上千组，没有发现问题，所以预估得分 $ 100pts $，好耶。

## T2 - gcd

一眼数论，鉴定为完全不符合做题偏好~~(XP)~~，遂直接写暴力。

不过最裸的暴力实在拿不到分，于是选择了分解质因数，求 $ x^i , y^j $ 的共同质因数之积 。

然而发现， $ x $ 和 $ y $ 的范围很大，而且小数据没有限制它们...惨了，因为分解质因数本身是(埃氏筛接近) $ O(n) $ 的。不过反正都写了，于是就直接冲了，对于筛质数给它加了一个上限去限制它。事实上，这又是一次歪打正着，因为筛只需要筛到 $ \sqrt x$ 和 $ \sqrt y $ 的范围就行。所以其实这是正解的前半部分。

不过因为最后我还是采取的暴力枚举，显然会T飞掉。预估得分 $ 0pts $，原因上面说过（实际上并不会爆零） 

## T3 - lotus

一眼区间，鉴定为符合做题偏好~~(XP)~~，然而没想出正解，遂直接写优化暴力。

显然区间判断可以用二维前缀和来做。然后暴力枚举左上和右下两个端点。这里我动了个小聪明，因为保证了随机数据，所以对于预估会T的点我去赌它的答案为 $ 0 $，然而反而坑了自己（只保证 $ a $ 随机，不保证 $ k $ 随机啊），导致比起预估分数少了一些分

预估得分 $ 44pts $，是范围给出的部分分。

## T4 - fdu

一眼数论，鉴定为怎么又来一道数论？戳啦，一切题目转模拟啦。一眼模拟，鉴定为纯纯的暴力。

于是暴力敲了最小的可以模拟的部分分，实在没什么可说的。事后发现，他给出二进制不是没有原因的，事实上这道题貌似和循环节啊之类的规律相关。

预估得分 $ 30pts $，普及组也能做的模拟部分分。

## 总结

|          | erchatree |   gcd   |  lotus  |   fdu   |   总分   |
| :------: | :-------: | :-----: | :-----: | :-----: | :------: |
| 预估分数 | $100pts$  | $0pts$  | $44pts$ | $30pts$ | $174pts$ |
| 实际分数 | $100pts$  | $44pts$ | $34pts$ | $30pts$ | $208pts$ |

T1在较短时间内切掉，并且没有写炸，没有漏判边界条件，正常发挥。

T2实在是实力不够没有想出正解，没拿满分正常，但是没想到 $ \sqrt x $ 属实不应该，差点因此放弃了质因数做法。数论实力有待加强（数论什么的...最讨厌了...让数论在这个世界上消失吧...）

T3没有想出正解是真的不应该！！！因为T3正解是双指针。双指针，上浮之类的思想理应是咱擅长的地方，然而这里竟然没想到双指针，非常坏思想。看来应该多去做下CF上面的题，会比较符合这种类型（但是NOIp常考吗？好像不是的）。CF你开比赛吧，CF你开比赛吧，CF你开比赛吧，CF你开比赛吧，没有CF我要去世力。

T4规律题，其实和数论有点相似（规律题？），这种思维难度较大的题还是咱的弱项，确实得练（早该练练了）



学习学长学姐优良传统，每日一张哈图：今天是圆焰的唯美图呢

**所有没看过《魔法少女小圆》的同学都应该欣赏一遍魔圆！！！**

![圆焰赛高](C:\Users\dell\Downloads\27ddfb5e5c245792.png)
