# CSP-S 2022 总结(~~忧寄~~)

首先先挂一下考场上写的总结(小作文)：

```cpp
/*不会真的要AFO吧,不会吧不会吧
T1:图论,应该可做,但是我弱了.估计暴力是大众分
T2:单调队列的感觉?没有认真看,写了个大众分的暴力
T3:图论,感觉正解不可做,当成大模拟写了个大众分
T4:树上问题,正解对于我来说不可做,但是应该难度不会很高.不知道为什么暴力写炸了 
总结:大众分 
希望不是退役总结(*/
```

不过事后看来这个赛场小作文在预估上有一些错误，于是重新进行一下总结。(按照时间排序)

## 非常拖时间的T1错误解

首先咱看到了T1**貌似**是一个类似于费用流的东西(可能是前几天学网络流学魔怔了)，然而实际上和费用流并没有什么关系XD。然后我们先转向如何解决"判断两个城市是否可以互通"的子问题。首先我们想到一个魔改floyd的公式:

`d[i][j] = min(d[i][j],d[i][k]+d[k][j]+1)`

其中d表示两城市需要的最短次数。和标准floyd的唯一区别是加了一个1(因为这个松弛的操作本身就要转车一次)，看上去是正确的，然而据实验，这个加一破坏了floyd的正确性，导致其需要运行多次才能得到最终答案(当然，也可能是咱写假了)

然后我们转向了DP，一切看上去都非常好，如果题目不是以下这样的话就更好了

> 从家出发去 4 个**不同**的景点游玩

DP并不方便记录"已经到达过的景点"这个状态，在进行了非常久的尝试后最终咱放弃了DP，然而这时已经快一个小时了...

## 最终,T1暴力解

DP无果，于是想出一个必定TLE的暴力解

为了解决“判断两个城市是否可以互通”，咱采用了BFS，深度限制为 $ k $ ，能BFS到的点就是可以互通的点，建边。然后我们DFS暴力搜索，这个问题就解决了。

很不幸，第三个样例绝赞地TLE了，于是进行一个剪枝:`if((4-dep)*MAXVAL + val <= ans)return ;//2.7s into 0.01s`。从注释中可以看出剪枝效果之强大。

## T1的反思

不论正解，实际上这个暴力搜索还是有很大的优化空间的

首先`(4-dep)*MAXVAL`的剪枝可以在开始的时候预处理前4大值，防止被轻易Hack

另外可以把边按照连接点的权值进行排序，这样第一次跑出来的值是相当优的，可以使剪枝更加高效。

至于正解什么的，实在是硬实力不足，倒是没什么可惜的。

## T2——策略上的歪打正着，因祸得福

为什么说是“歪打正着，因祸得福”呢?

因为T1已经耗费了咱一个多小时的时间，所以为了控制时间咱决定T2打一个暴力就走人，完全没有发现这是一个很裸的区间最值问题。

考完后非常后悔，因为实际上要写这个东西并不是写不出来的。然而事后再分析，这真的是整场比赛中咱做出的最好的一个选择。因为T2的暴力可以拿到 $ 60pts $，而正解的调试非常耗时，非常可能花费巨大时间而拿不到满分甚至没拿到 $ 60pts $。所以咱就运气好歪打正着了一个当前状态的最优策略 qwq  （不过T2其实是这次考试唯一可做的一道题）



## T4——考虑欠佳

因为T3 题面长~~(+看这道题不顺眼+怎么又是一道图论)~~ ，所以我们先在T3的程序里写点小作文，然后跳过T3。

T4，可以很简单想到一个暴力：抽链+递推最短路

抽链第一想法是dfs，不过根据深度上浮(相当于暴力LCA)理论显然更优(个人也感觉更好写一点)。然后递推求最短路。咱当时认为虽然时间复杂度显然过大，但是这**"是有正确性"**的。然后，我们喜提样例 $ 2 $ 第 $ 5 $ 个点 $ WA $ 掉。然而很魔幻的是，样例 $ 3 $ 全过。我们以为是有什么地方写炸了，于是Debug，Debug了很久也没找出问题。

当然是找不出问题的，因为**抽链**这个操作本身就有问题：它没有考虑到数据传输到链以外再传输回来的情况。

正解对于咱来说当然是考场不可做的，所以感觉除了无用debug时间有一点多以外没什么策略失误。

## T3——正常地丢掉了可做分

做完T4咱又回来做T3。因为没什么时间了有点想摆烂，而且心态很炸（此时我的估分是 $ 40 + 15 + 0 = 55pts$），所以没有去想正解，当成模拟敲了一个 $ 15pts $ 的“大模拟”。

虽然其实 $ 40pts $ 的解法完全是可做的，Tarjan咱也不是不会，但是考虑到考场上的心态、时间、状态等要素，其实这剩下的 $ 25pts $ 没有拿到到算是正常的。

## 总总结

总体策略没有问题，基本拿到了该拿的分。考场预估过于悲观(部分原因是因为考场上不知道T4错误的原因，咱以为是程序完全有问题，所以预估T4会爆零，T2看错范围导致预估出错严重偏低，T1预估偏低)，影响发挥。

分数预估：咱认为，这次估分将会和实际成绩有**相当大的波动**，原因在于：T1的剪枝非常看CCF的数据强度，极端情况下可以卡到 $ 60pts $ 左右。T2的极端数据是 $ 1e9 $，这的确看数据强度和CCF的老年机状态(玩笑归玩笑，CCF那确实不是老年机)。T4只要CCF不搞随机数据，基本上是肯定会被卡的。

乐观预估分(AKA 洛谷，InfOJ成绩)： $ 70 + 60 + 15 + 40 = 185pts $

保守估计分： $  60 + 50 + 15 + 40 = 165pts $

咱认为这个分数...受限自己这个水平和基础，能发挥成这样其实是满意的

## NOIP展望(计划)

在考NOIP之前基本过一遍oi-wiki上的NOIP级别的算法内容

过一遍洛谷上的模板(咱的基础太弱啦)